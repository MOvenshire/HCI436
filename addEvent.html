<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="sidebar.css">
    <title>Add Event</title>
    <style>
        body {
            font-size: 18px; /* Increase base font size for better visibility */
            display: flex;
            font-family: Arial, sans-serif; /* Sets a readable, neat font */
            margin-right:0;
            margin-top: 0;
        }

        .select-event {
            width: 90%;
            padding-right: 10px;
        }
        .form-section {
            display: inline-block;
            vertical-align: top;
            margin-right: 10px;
            width: 100%;
        }
        .date-section {
            display: flex;
            justify-content: space-between; /* Ensures spacing between the date inputs */
        }
        .fiftyfifty {
            width: 50%; 
        }
        .event-type, .priority-type, .flexible-type {
            display: inline-block;
            margin-right: 15px;
            cursor: pointer;
        }
        .event-type img, .priority-type img {
            width: 80px; /* Increasing image size */
            vertical-align: middle;
        }
        .event-type input:checked + img, 
        .priority-type input:checked + img {
            border: 3px solid blue; /* Thicker border for better visibility */
        }
        .flexible-type input:checked + label {
            border: 3px solid blue; /* Thicker border for better visibility */
        }
        .label-container {
            margin-bottom: 15px; /* More space below labels */
        }
        input[type="text"], input[type="datetime-local"] {
            padding: 12px;
            width: 100%; /* Adjusts width to take up the full container */
            margin: 5px 0;
            border: 2px solid #ccc; /* Adds a subtle border */
            border-radius: 4px; /* Rounds the corners */
            box-sizing: border-box; /* Adjusts box-sizing to include padding and border in width */
            font-size: 16px; /* Slightly smaller font for input */
        }
        input[type="submit"] {
            padding: 12px 24px;
            font-size: 18px;
            cursor: pointer;
            background-color: #4CAF50; /* Adds a green background for visibility */
            color: white; /* White text color */
            border: none; /* Removes border */
            border-radius: 4px; /* Rounded corners */
            transition: background-color 0.3s; /* Smooth transition for hover effect */
        }
        input[type="submit"]:hover {
            background-color: #45a049; /* Darker shade on hover */
        }
        input[type="submit"] {
            padding: 12px 24px;
            font-size: 18px;
            cursor: pointer;
            background-color: #4CAF50; /* Adds a green background for visibility */
            color: white; /* White text color */
            border: none; /* Removes border */
            border-radius: 4px; /* Rounded corners */
            transition: background-color 0.3s; /* Smooth transition for hover effect */
        }
        input[type="submit"]:hover, .cancel-button:hover {
            background-color: #45a049; /* Darker shade on hover */
        }
        .cancel-button {
            padding: 12px 24px;
            font-size: 18px; /* bigger font size */
            cursor: pointer;
            background-color: #f44336; /* Red background for the cancel button */
            color: white; /* White text color */
            border: none; /* Removes border */
            border-radius: 4px; /* Rounded corners */
            transition: background-color 0.3s; /* Smooth transition for hover effect */
        }
        .cancel-button:hover {
            background-color: #d32f2f; /* Darker red shade on hover */
        }
    </style>
</head>
<body>
    <div class="select-event">
        <h2>Create New Event</h2>
        <form id="eventForm">
        <label for="EventName"><b>Event name:</b></label>
        <input type="text" id="EventName" name="EventName" required><br><br>
        
        <div class="form-section">
            <div class="label-container"><b>Event Type:</b></div>
            <!-- Repeated for each event type -->
            <label class="event-type">
            <input type="radio" name="EventType" value="Seminar" id="Seminar">
            <img src="images/seminar-icon.png" alt="Seminar" title="Class">
            <h5>Class</h5>
        </label>
        <label class="event-type">
            <input type="radio" name="EventType" value="Meeting" id="Meeting">
            <img src="images/meeting-icon.png" alt="Meeting" title="Meeting">
            <h5>Meeting</h5>
        </label>
        <label class="event-type">
            <input type="radio" name="EventType" value="Party" id="Party">
            <img src="images/party-icon.png" alt="Party" title="Party">
            <h5>Party</h5>
        </label>
        <label class="event-type">
            <input type="radio" name="EventType" value="Bed" id="Bed">
            <img src="images/bed-icon.png" alt="Bed" title="Sleep">
            <h5>Sleep</h5>
        </label>
        <label class="event-type">
            <input type="radio" name="EventType" value="Plane" id="Plane">
            <img src="images/plane-icon.png" alt="Plane" title="Travel">
            <h5>Travel</h5>
        </label>
        <label class="event-type">
            <input type="radio" name="EventType" value="work" id="work">
            <img src="images/work-icon.png" alt="Work" title="Work">
            <h5>Work</h5>
        </label>
        <label class="event-type">
            <input type="radio" name="EventType" value="Food" id="Food">
            <img src="images/food-icon.png" alt="Food" title="Food">
            <h5>Food</h5>
        </label>
        <label class="event-type">
            <input type="radio" name="EventType" value="Appointment" id="Appointment">
            <img src="images/appointment-icon.png" alt="Appointment" title="Appointment">
            <h5>Appointment</h5>
        </label>
        <label class="event-type">
            <input type="radio" name="EventType" value="Hydrate" id="Hydrate">
            <img src="images/hydrate-icon.png" alt="Hydrate" title="Hydrate">
            <h5>Hydrate</h5>
        </label>
        <label class="event-type">
            <input type="radio" name="EventType" value="Study" id="Study">
            <img src="images/study.png" alt="Study" title="Study">
            <h5>Study</h5>
        </label>
        <br><br>
        </div>

        <div class="form-section">
            <div class="label-container"><b>Priority:</b></div>
            <label class="priority-type">
                <input type="radio" name="Priority" value="1">
                <img src="images/na.png" alt="NA">
            </label>
            <label class="priority-type">
                <input type="radio" name="Priority" value="1">
                <img src="images/priority1-icon.png" alt="!">
            </label>
            <label class="priority-type">
                <input type="radio" name="Priority" value="2">
                <img src="images/double.png" alt="!!">
            </label>
            <label class="priority-type">
                <input type="radio" name="Priority" value="3">
                <img src="images/triple.png" alt="!!!">
            </label>
        </div>

        <div class="form-section">
            <div class="label-container"><b>Flexible:</b></div>
            <label class="flexible-type">
                <input type="radio" name="Flexible" value="Yes" id="FlexibleYes">
                <label for="FlexibleYes">Yes</label>
            </label>
            <label class="flexible-type">
                <input type="radio" name="Flexible" value="No" id="FlexibleNo">
                <label for="FlexibleNo">No</label>
            </label>
        </div><br><br>

        <div class="form-section date-section">
            <div class="fiftyfifty">
                <div class="label-container"><b>Start Date:</b></div>
                <input type="datetime-local" id="StartDate" name="StartDate" required><br><br>
            </div>
            <div class="fiftyfifty">
                <div class="label-container"><b>End Date:</b></div>
                <input type="datetime-local" id="EndDate" name="EndDate" required><br><br>
            </div>
        </div>

        <input type="submit" value="Submit">
        <a href="calendar.html">
            <button type="button" class="cancel-button">Cancel</button>
        </a>
    </form>
    </div>  
    <div class="rightsidebar"></div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullcalendar/3.10.2/fullcalendar.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.1/moment.min.js"></script>
    <script>
        $(document).ready(function() {
            $('#eventForm').submit(function(e) {
                e.preventDefault();

                // Retrieve event form values
                var eventName = $('#EventName').val();
                var startDate = $('#StartDate').val();
                var endDate = $('#EndDate').val();
                var eventType = $('input[name="EventType"]:checked').val();
                var priority = $('input[name="Priority"]:checked').val();
                var flexible = $('input[name="Flexible"]:checked').val();

                var events = [];

                if (eventType === 'Study') {
                    var startMoment = moment(startDate);
                    var endMoment = moment(endDate);

                    while (startMoment < endMoment) {
                        var sessionEnd = moment(startMoment).add(25, 'minutes');
                        if (sessionEnd > endMoment) sessionEnd = endMoment;

                        events.push({
                            title: eventName,
                            start: startMoment.format(),
                            end: sessionEnd.format(),
                            allDay: false,
                            eventtype: eventType,
                            priority: priority,
                            flexible: flexible
                        });

                        startMoment = sessionEnd;

                        if (startMoment < endMoment) {
                            var breakEnd = moment(startMoment).add(5, 'minutes');
                            if (breakEnd > endMoment) breakEnd = endMoment;

                            events.push({
                                title: eventName + " Break",
                                start: startMoment.format(),
                                end: breakEnd.format(),
                                allDay: false,
                                type: 'Break'
                            });

                            startMoment = breakEnd;
                        }
                    }
                } else {
                    // For other event types, just use a single event
                    events.push({
                        title: eventName,
                        start: startDate,
                        end: endDate,
                        allDay: false,
                        eventtype: eventType,
                        priority: priority,
                        flexible: flexible
                    });
                }

                // Retrieve and combine events from local storage
                var existingEvents = JSON.parse(localStorage.getItem('events')) || [];
                var combinedEvents = existingEvents.concat(events);
                localStorage.setItem('events', JSON.stringify(combinedEvents));

                alert('Event(s) saved! Navigate to the calendar page to see them.');
            });
        });
    </script>

        
        
        
</body>
</html>
